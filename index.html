<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brickolini</title>
</head>

<body>
  <div class="fixed inset-0 bg-black flex justify-center items-center"
    :class="{ 'pointer-none': $store.state.mode !== 'in-game', 'invisible': $store.state.mode !== 'in-game' }" x-data>
    <canvas id="game-canvas" class="pointer-events-none aspect-[4/3] h-full max-w-full"></canvas>
  </div>

  <div class="fixed inset-0 bg-black flex justify-center items-center"
    :class="{ 'pointer-none': $store.state.mode !== 'cutscene', 'invisible': $store.state.mode !== 'cutscene' }" x-data
    @click="skipCutscene()">
    <canvas id="cutscene-canvas" class="pointer-events-none aspect-[4/3] h-full max-w-full"></canvas>
  </div>

  <div id="loading-screen" class="fixed inset-0 flex flex-col justify-center items-center bg-white/90 text-[#333333]"
    x-data
    :style="$store.state.mode === 'loading' ? { pointerEvents: 'auto', display: 'flex' } : { pointerEvents: 'none', display: 'none' }">
    <img src="/title.png" alt="Brickolini Title" class="w-[20rem] h-auto mb-5" />
    <p class="text-xl font-bold">Loading...</p>
  </div>

  <div
    class="font-['Nunito',_'Arial_Rounded_MT_Bold',_sans-serif] bg-[url('/texture.png')] bg-[length:150px] bg-repeat min-h-screen flex flex-col justify-center items-center px-10"
    x-data :class="{ 'pointer-none': $store.state.mode !== 'welcome', 'invisible': $store.state.mode !== 'welcome' }">
    <div
      class="flex flex-col gap-5 justify-center items-center m-0 text-[#333333] p-7.5 text-center bg-white/90 rounded-xl shadow-[0_6px_12px_rgba(0,0,0,0.2)] border-4 border-[#333333]">
      <img src="/title.png" alt="Brickolini Title" class="w-[25rem] h-auto mx-auto mb-5" />
      <p class="text-[#333333] mx-5">
        To play, you'll need the original game's ISO file.
        You can download it from the Internet Archive:
        <a href="https://archive.org/details/lego-islandi" target="_blank" rel="noopener noreferrer"
          class="text-[#005eb8] font-bold underline hover:text-[#d9001c]">Download ISO</a>
      </p>
      <div id="drop-zone" x-data="dropZoneComponent()" @dragover.prevent="dragging = true"
        @dragleave.prevent="dragging = false" @drop.prevent="handleDrop($event)"
        :class="{ 'border-[#009743] bg-[#e0e0e0]': dragging }"
        class="border-4 border-dashed border-[#005eb8] p-[35px] rounded-[10px] bg-[#f2f2f2] cursor-pointer transition-colors duration-300 ease-in-out hover:bg-[#e0e0e0] hover:border-[#009743] w-full">
        <p class="m-[10px_0] text-[1.3em] font-bold">Drag & Drop your game ISO here</p>
        <p class="m-[10px_0] text-[1.3em] font-bold">or</p>
        <label for="iso-input" @click.prevent="$refs.isoInput.click()"
          class="inline-block bg-[#ffcd00] text-[#333333] p-[12px_25px] rounded-[8px] cursor-pointer font-black text-[1.1em] border-3 border-[#d9001c] transition-all duration-300 ease-in-out mt-[15px] uppercase shadow-[0_4px_0px_#d9001c] hover:bg-[#e4a700] active:translate-y-[2px] active:shadow-[0_2px_0px_#d9001c]">Select
          ISO File</label>
        <input type="file" id="iso-input" x-ref="isoInput" accept=".iso" class="hidden"
          @change="handleFileSelect($event.target.files)">
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>